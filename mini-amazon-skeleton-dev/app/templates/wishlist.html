{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
  <h2>Your Wishlist</h2>

  {% if items %}
    <div class="product-grid">
      {% for item in items %}
        {% set product = product_map.get(item.product_id) %}
        {% if product %}
          <div class="product-card">
            <div class="product-image" style="background-image: url('{{ product.image or "https://picsum.photos/seed/" ~ product.id ~ "/600/400" }}');"></div>
            <div class="product-body">
              <h5 class="product-title">{{ product.name }}</h5>
              <p class="product-seller"><small class="text-muted">Sold by: {{ product.seller_name or 'Unknown Seller' }}</small></p>
              <p class="product-price">${{ '%.2f'|format(product.price) }}</p>
              {% if product.category %}
              <span class="badge badge-light product-badge">{{ product.category }}</span>
              {% endif %}
              <div class="mt-3 d-flex justify-content-between align-items-center">
                <a href="{{ url_for('index.product_detail', product_id=product.id) }}" class="btn btn-sm btn-outline-dark">View Details</a>
                <form action="{{ url_for('wishlist.wishlist_remove', product_id=product.id) }}" method="POST">
                  <button type="submit" class="btn btn-sm btn-outline-danger">Remove</button>
                </form>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center mt-5">
      <p class="text-muted">No items in your wishlist yet â€” go add some!</p>
      <a href="{{ url_for('index.index') }}" class="btn btn-primary">Browse Products</a>
    </div>
  {% endif %}
</div>

{% endblock %}
